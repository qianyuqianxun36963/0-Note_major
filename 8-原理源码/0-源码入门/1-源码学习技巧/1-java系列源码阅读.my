<h1>如何阅读Java源码？</h1>

<h2><strong>阅读Java源码的前提条件：</strong></h2>

<h3><strong>1、技术基础</strong></h3>

<p>在阅读源码之前，我们要有一定程度的技术基础的支持。</p>

<p>假如你从来都没有学过Java，也没有其它编程语言的基础，上来就啃《Core Java》，那样是很难有收获的，尤其是《深入Java虚拟机》这类书，或许别人觉得好，但是未必适合现在的你。</p>

<p>比如设计模式，许多Java源码当中都会涉及到。再比如阅读Spring源码的时候，势必要先对IOC，AOP，Java动态代理等知识点有所了解.</p>

<h3><strong>2、足够的耐心</strong></h3>

<p>通过阅读源码我们可以学习大佬的设计思路，技巧。还可以把我们一些零碎的知识点整合起来，从而融会贯通。总之阅读源码的好处多多，想必大家也清楚。</p>

<p>但是真的把那么庞大复杂的代码放到你的眼前时，肯定会在阅读的过程中卡住，就如同陷入了一个巨大的迷宫，如果想要在这个巨大的迷宫中找到一条出路，那就需要把整个迷宫的整体结构弄清楚，比如：API结构、框架的设计图。而且还有理解它的核心思想，确实很不容易。</p>

<p>刚开始阅读源码的时候肯定会很痛苦，所以，没有足够的耐心是万万不行的。</p>

<h2><strong>如何读Java源码：</strong></h2>

<p>团长也是经历过阅读源码种种痛苦的人，算是有一些成功的经验吧，今天来给大家分享一下。</p>

<p>如果你已经有了一年左右的Java开发经验的话，那么你就有阅读Java源码的技术基础了。</p>

<h3><strong>1、建议从JDK源码开始读起，这个直接和eclipse集成，不需要任何配置。</strong></h3>

<p>可以从JDK的工具包开始，也就是我们学的《数据结构和算法》Java版，如List接口和ArrayList、LinkedList实现，HashMap和TreeMap等。这些数据结构里也涉及到排序等算法，一举两得。</p>

<p>面试时，考官总喜欢问ArrayList和Vector的区别，你花10分钟读读源码，估计一辈子都忘不了。</p>

<p>然后是core包，也就是String、StringBuffer等。 如果你有一定的Java IO基础，那么不妨读读FileReader等类。</p>

<p>建议大家看看《Java In A Nutshell》，里面有整个Java IO的架构图。Java IO类库，如果不理解其各接口和继承关系，则阅读始终是一头雾水。</p>

<p>Java IO 包，我认为是对继承和接口运用得最优雅的案例。如果你将来做架构师，你一定会经常和它打交道，如项目中部署和配置相关的核心类开发。</p>

<p>读这些源码时，只需要读懂一些核心类即可，如和ArrayList类似的二三十个类，对于每一个类，也不一定要每个方法都读懂。像String有些方法已经到虚拟机层了(native方法)，如hashCode方法。</p>

<p>当然，如果有兴趣，可以对照看看JRockit的源码，同一套API，两种实现，很有意思的。</p>

<p>如果你再想钻的话，不妨看看针对虚拟机的那套代码，如System ClassLoader的原理，它不在JDK包里，JDK是基于它的。JDK的源码Zip包只有10来M，它像是有50来M，Sun公司有下载的，不过很隐秘。我曾经为自己找到、读过它很兴奋了一阵。</p>

<h3><strong>2、Java Web项目源码阅读</strong></h3>

<p>步骤：表结构 &rarr; web.xml &rarr; mvc &rarr; db &rarr; spring ioc &rarr; log&rarr; 代码</p>

<p>① 先了解项目数据库的表结构，这个方面是最容易忘记的，有时候我们只顾着看每一个方法是怎么进行的，却没有去了解数据库之间的主外键关联。其实如果先了解数据库表结构，再去看一个方法的实现会更加容易。</p>

<p>② 然后需要过一遍web.xml，知道项目中用到了什么拦截器，监听器，过滤器，拥有哪些配置文件。如果是拦截器，一般负责过滤请求，进行AOP等；如果是监听器，可能是定时任务，初始化任务；配置文件有如 使用了spring后的读取mvc相关，db相关，service相关，aop相关的文件。</p>

<p>③ 查看拦截器，监听器代码，知道拦截了什么请求，这个类完成了怎样的工作。有的人就是因为缺少了这一步，自己写了一个action，配置文件也没有写错，但是却怎么调试也无法进入这个action，直到别人告诉他，请求被拦截了。</p>

<p>④ 接下来，看配置文件，首先一定是mvc相关的，如springmvc中，要请求哪些请求是静态资源，使用了哪些view策略，controller注解放在哪个包下等。然后是db相关配置文件，看使用了什么数据库，使用了什么orm框架，是否开启了二级缓存，使用哪种产品作为二级缓存，事务管理的处理，需要扫描的实体类放在什么位置。最后是spring核心的ioc功能相关的配置文件，知道接口与具体类的注入大致是怎样的。当然还有一些如apectj等的配置文件，也是在这个步骤中完成。</p>

<p>⑤ log相关文件，日志的各个级别是如何处理的，在哪些地方使用了log记录日志。</p>

<p>⑥ 从上面几点后知道了整个开源项目的整体框架，阅读每个方法就不再那么难了。</p>

<p>⑦ 当然如果有项目配套的开发文档也是要阅读的。</p>

<h3><strong>3、Java框架源码阅读</strong></h3>

<p>当然了，就是Spring、MyBatis这类框架。</p>

<p>在读Spring源码前，一定要先看看《J2EE Design and Development》这本书，它是Spring的设计思路。注意，不是中文版，中文版完全被糟蹋了。</p>

<p>想要阅读MyBatis的源码就要先了解它的一些概念，否则云里来雾里去的什么也不懂。有很多人会选择去买一些书籍来帮助阅读，当然这是可取的。那么如果不想的话，就可以去官网查看它的介绍（MyBatis网站：http://www.mybatis.org/mybatis-3/zh/getting-started.html），团长也是按照官网上面的介绍来进行源码阅读的。团长认为MyBatis的亮点就是管理SQL语句。</p>

<p><strong>总结</strong></p>

<p>没有人一开始就可以看得懂那些源码，我们都是从0开始的，而且没有什么捷径可寻，无非就是看我们谁愿意花时间去研究，谁的求知欲更强烈，谁更有耐心。阅读源码的过程中我们的能力肯定会提升，可以从中学到很多东西。在我们做项目的时候就会体现出来了，的确会比以前顺手很多。</p>
